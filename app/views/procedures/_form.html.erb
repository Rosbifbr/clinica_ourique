<div class="container mt-4">
  <div class="row justify-content-center">
    <div class="col-12 col-md-8">
        <%= form_with(model: [@client, procedure], url: procedure.new_record? ? client_procedures_path(@client) : client_procedure_path(@client, procedure), class: "card shadow-lg") do |form| %>
        <div class="card-header bg-primary bg-gradient text-white py-3">
          <h4 class="card-title mb-0">
            <i class="bi bi-clipboard2-pulse-fill me-2"></i>
            <%= procedure.new_record? ? "New Procedure" : "Edit Procedure" %>
          </h4>
        </div>

        <div class="card-body p-4">
          <% if procedure.errors.any? %>
            <div class="alert alert-danger alert-dismissible fade show" role="alert">
              <div class="d-flex align-items-center">
                <i class="bi bi-exclamation-triangle-fill me-2"></i>
                <h6 class="mb-0"><%= pluralize(procedure.errors.count, "error") %> prohibited this procedure from being saved:</h6>
              </div>
              <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
              <ul class="mb-0 mt-2">
                <% procedure.errors.each do |error| %>
                  <li><%= error.full_message %></li>
                <% end %>
              </ul>
            </div>
          <% end %>

          <div class="col-12">
            <%= form.label :procedure_type_id, "Procedure Type", class: "form-label fw-medium" %>
            <div class="input-group">
              <span class="input-group-text"><i class="bi bi-activity"></i></span>
              <%= form.collection_select :procedure_type_id,
                ProcedureType.all,
                :id,
                :name,
                { prompt: 'Select procedure type' },
                { class: 'form-select' }
              %>
            </div>
          </div>

          <div class="col-12">
            <%= form.label :observation, class: "form-label fw-medium" %>
            <div class="input-group">
              <span class="input-group-text"><i class="bi bi-journal-text"></i></span>
              <%= form.text_area :observation, class: "form-control", rows: 3, placeholder: "Enter observations" %>
            </div>
          </div>

          <div class="col-md-6">
            <%= form.label :date, class: "form-label fw-medium" %>
            <div class="input-group">
              <span class="input-group-text"><i class="bi bi-calendar"></i></span>
              <%= form.date_field :date, class: "form-control" %>
            </div>
          </div>

          <div class="col-md-6">
            <%= form.label :teeth, class: "form-label fw-medium" %>
            <div class="input-group">
              <span class="input-group-text"><i class="bi bi-diagram-2"></i></span>
              <%= form.text_field :teeth, class: "form-control", placeholder: "Enter teeth number" %>
            </div>
          </div>
        </div>

        <div class="card-footer bg-light p-3">
          <div class="d-flex justify-content-end gap-2">
            <%= link_to client_path(@client), class: "btn btn-outline-secondary" do %>
              <i class="bi bi-x-circle me-1"></i>Cancel
            <% end %>
            <%= form.submit class: "btn btn-primary", value: procedure.new_record? ? "Create Procedure" : "Update Procedure" %>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>
